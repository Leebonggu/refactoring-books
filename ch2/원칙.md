# 2. 리팩터링 원칙

## 2.1 리팩터링의 정의

리팩터링이라는 말은 자주 사용되지만, 사용하는 사람마다 정의가 다르다. 리팩터링은 명사로도, 동사로도 사용가능하다.

> 명사: 소프트웨어의 겉보기 동작은 그대로 유지한 채 코드를 이해하기 수정하기 쉽도록 내부 구조를 변경하는 방법

1장에서 살펴본, 함수추출하기와 조건부 로직을 다형성으로 바꾸기처럼 이름 붙은 리팩터링 기법들이 명사 정의에 해당

> 동사: 소프트웨어의 겉보기 동작은 그대로 유지한 채, 여러 가지 리팩터링 기법을 적용해서 소프트웨어를 재구성한다.

대부분의 사람들이 리팩터링 용어를 사용하지만, 대부분은 코드를 고치면 리팩터링이라고 말을 한다. 하지만 정의에 따르면 `특정한 방식에 따라 코드를 정리하는 것`만이 리팩터링이다. 동작을 보존하는 작은 단계들을 거쳐 코드를 수정하고, 이러한 단계들을 순차적으로 연결하여 큰 변화를 만들어내는 일이다.

겉보기 동작을 그대로 유지한다는 것은 리팩터링 전과 후의 코드가 똑같이 작동해야 한다는 뜻이다. 코드에 변경이 있지만, 사용자 입장에서는 이전과 똑같은 경험을 할 수 있어야 한다는 것이다. 리팩터링은 성능 최적화와 비슷한 과정이다. 둘다 코드를 변경하지만 전반적인 기능을 유지한다. 단지 목적이 다른데 `리팩터링`은 코드를 이해하고 수정하기 쉽게 만드는 것이 목적이다. `성능최적화`는 속도 개선이 목적이다.

## 2.2 두개의 모자

내가 현재 하는 작업이 어떤 작업인지 구분하는게 중요하다. 예를들어 소프트웨어를 개발할 때 목적이 '기능추가'인지, '리팩터링'인지 구분해서 작업하는걸 생각해보자. `기능을 추가`할 때는 기존의 코드는 건드리지 않고, 기능추가에만 집중을 한다. 작업정도는 테스트를 추가해서 통과하는지 확인하는 방식으로 한다. 반면 `리팩터링`을 할 때는 기능 추가는 절대 하지않고, 오로지 코드 재구성에만 집중한다.

새 기능을 추가하다보면 구조를 바꿔야 작업하기 훨씬 쉽겠다는 생각이 드는데, 그럼 잠시 멈추고 리팩터링을 진행한다. 코드 구조가 어느정도 개선되면 기능추가에 집중한다. 추가한 기능이 제대로 작동하는지 확인하면 작성한 코드를 살펴보고, 코드가 이해하기 어렵다면 리팩터링을 진행한다. 

-> 리팩터링을 평소에 한다면, 몰아서 할 때보다 수고가 줄어들 수 있겠다. 현재 내가 하는 작업이 기능추가인지, 리팩터링인지 알고 작업한다면 작업 능률이 더 올라갈 수 있겠다. 왜냐면, 기능추가하다보면 기존 코드를 보면서 수정하고싶은 마음이 생기고, 그 코드를 고치다 결국 기존목적인 기능추가보다 코드를 수정하는데 더 시간을 쓰는 경우가 생기기도 한다. 이런 상황은 결국 전체 프로젝트의 작업 속도를 늦출수도 있겠다 싶음.